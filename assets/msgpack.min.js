// from https://github.com/msgpack/msgpack-javascript
// MIT liscensed, author uupaa.js@gmail.com
// edited and minified for solemnsky

module.exports={pack:c,unpack:k};var l={},m={},n=[],p=0,q=0,r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},t=String.fromCharCode,u=512;function c(e,b){q=0;var g=v([],e,0);return q?!1:b?w(g):g}function k(e){var b;if("string"===typeof e){b=[];var g=e.split(""),a=-1,f;f=g.length;for(e=f%8;e--;)++a,b[a]=l[g[a]];for(e=f>>3;e--;)b.push(l[g[++a]],l[g[++a]],l[g[++a]],l[g[++a]],l[g[++a]],l[g[++a]],l[g[++a]],l[g[++a]])}else b=e;n=b;p=-1;return x()}
function v(e,b,g){var a,f,h;if(null==b)e.push(192);else if(!1===b)e.push(194);else if(!0===b)e.push(195);else switch(typeof b){case "number":b!==b?e.push(203,255,255,255,255,255,255,255,255):Infinity===b?e.push(203,127,240,0,0,0,0,0,0):Math.floor(b)===b?0>b?-32<=b?e.push(224+b+32):-128<b?e.push(208,b+256):-32768<b?(b+=65536,e.push(209,b>>8,b&255)):-2147483648<b?(b+=4294967296,e.push(210,b>>>24,b>>16&255,b>>8&255,b&255)):(f=Math.floor(b/4294967296),b&=4294967295,e.push(211,f>>24&255,f>>16&255,f>>8&
255,f&255,b>>24&255,b>>16&255,b>>8&255,b&255)):128>b?e.push(b):256>b?e.push(204,b):65536>b?e.push(205,b>>8,b&255):4294967296>b?e.push(206,b>>>24,b>>16&255,b>>8&255,b&255):(f=Math.floor(b/4294967296),b&=4294967295,e.push(207,f>>24&255,f>>16&255,f>>8&255,f&255,b>>24&255,b>>16&255,b>>8&255,b&255)):((f=0>b)&&(b*=-1),h=Math.log(b)/.6931471805599453+1023|0,g=b*Math.pow(2,1075-h),b=g&4294967295,f&&(h|=2048),f=g/4294967296&1048575|h<<20,e.push(203,f>>24&255,f>>16&255,f>>8&255,f&255,b>>24&255,b>>16&255,b>>
8&255,b&255));break;case "string":g=b.length;h=e.length;e.push(0);for(f=0;f<g;++f)a=b.charCodeAt(f),128>a?e.push(a&127):2048>a?e.push(a>>>6&31|192,a&63|128):65536>a&&e.push(a>>>12&15|224,a>>>6&63|128,a&63|128);a=e.length-h-1;32>a?e[h]=160+a:256>a?e.splice(h,1,217,a):65536>a?e.splice(h,1,218,a>>8,a&255):4294967296>a&&e.splice(h,1,219,a>>>24,a>>16&255,a>>8&255,a&255);break;default:if("[object Uint8Array]"===Object.prototype.toString.call(b)){a=b.length;256>a?e.push(196,a):65536>a?e.push(197,a>>8,a&
255):4294967296>a&&e.push(198,a>>>24,a>>16&255,a>>8&255,a&255);Array.prototype.push.apply(e,b);break}if(++g>=u)return q=1,[];if(r(b))for(a=b.length,16>a?e.push(144+a):65536>a?e.push(220,a>>8,a&255):4294967296>a&&e.push(221,a>>>24,a>>16&255,a>>8&255,a&255),f=0;f<a;++f)v(e,b[f],g);else{h=e.length;e.push(0);a=0;for(f in b)++a,v(e,f,g),v(e,b[f],g);16>a?e[h]=128+a:65536>a?e.splice(h,1,222,a>>8,a&255):4294967296>a&&e.splice(h,1,223,a>>>24,a>>16&255,a>>8&255,a&255)}}return e}
function x(){var e,b,g,a=0,f,h,d=n;b=d[++p];if(224<=b)return b-256;if(192>b){if(128>b)return b;144>b?(a=b-128,b=128):160>b?(a=b-144,b=144):(a=b-160,b=160)}switch(b){case 192:return null;case 194:return!1;case 195:return!0;case 202:return a=16777216*d[++p]+(d[++p]<<16)+(d[++p]<<8)+d[++p],f=a>>23&255,h=a&8388607,a&&2147483648!==a?255===f?h?NaN:Infinity:(a&2147483648?-1:1)*(h|8388608)*Math.pow(2,f-127-23):0;case 203:a=16777216*d[++p]+(d[++p]<<16)+(d[++p]<<8)+d[++p];b=a&2147483648;f=a>>20&2047;h=a&1048575;
if(!a||2147483648===a)return p+=4,0;if(2047===f)return p+=4,h?NaN:Infinity;a=16777216*d[++p]+(d[++p]<<16)+(d[++p]<<8)+d[++p];return(b?-1:1)*((h|1048576)*Math.pow(2,f-1023-20)+a*Math.pow(2,f-1023-52));case 207:return a=16777216*d[++p]+(d[++p]<<16)+(d[++p]<<8)+d[++p],4294967296*a+16777216*d[++p]+(d[++p]<<16)+(d[++p]<<8)+d[++p];case 206:a+=16777216*d[++p]+(d[++p]<<16);case 205:a+=d[++p]<<8;case 204:return a+d[++p];case 211:return a=d[++p],a&128?-1*(72057594037927936*(a^255)+281474976710656*(d[++p]^255)+
1099511627776*(d[++p]^255)+4294967296*(d[++p]^255)+16777216*(d[++p]^255)+65536*(d[++p]^255)+256*(d[++p]^255)+(d[++p]^255)+1):72057594037927936*a+281474976710656*d[++p]+1099511627776*d[++p]+4294967296*d[++p]+16777216*d[++p]+65536*d[++p]+256*d[++p]+d[++p];case 210:return a=16777216*d[++p]+(d[++p]<<16)+(d[++p]<<8)+d[++p],2147483648>a?a:a-4294967296;case 209:return a=(d[++p]<<8)+d[++p],32768>a?a:a-65536;case 208:return a=d[++p],128>a?a:a-256;case 219:a+=16777216*d[++p]+(d[++p]<<16);case 218:a+=d[++p]<<
8;case 217:a+=d[++p];case 160:f=[];b=p;for(e=b+a;b<e;)g=d[++b],f.push(128>g?g:224>g?(g&31)<<6|d[++b]&63:(g&15)<<12|(d[++b]&63)<<6|d[++b]&63);p=b;return 10240>f.length?t.apply(null,f):w(f);case 198:a+=16777216*d[++p]+(d[++p]<<16);case 197:a+=d[++p]<<8;case 196:return a+=d[++p],b=++p+a,d=d.slice(p,b),p+=a,d;case 223:a+=16777216*d[++p]+(d[++p]<<16);case 222:a+=(d[++p]<<8)+d[++p];case 128:for(h={};a--;){e=d[++p]-160;f=[];b=p;for(e=b+e;b<e;)g=d[++b],f.push(128>g?g:224>g?(g&31)<<6|d[++b]&63:(g&15)<<12|
(d[++b]&63)<<6|d[++b]&63);p=b;h[t.apply(null,f)]=x()}return h;case 221:a+=16777216*d[++p]+(d[++p]<<16);case 220:a+=(d[++p]<<8)+d[++p];case 144:for(f=[];a--;)f.push(x());return f}}function w(e){try{return t.apply(this,e)}catch(b){}for(var g=[],a=0,f=e.length;a<f;++a)g[a]=m[e[a]];return g.join("")}for(var y=0,z;256>y;++y)z=t(y),l[z]=y,m[y]=z;for(y=128;256>y;++y)l[t(63232+y)]=y;
